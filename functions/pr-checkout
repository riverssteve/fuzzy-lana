function pr-checkout() {
    local jq_template pr_number

    jq_template='"#\(.number) - \(.title)\tAuthor: \(.user.login)\nCreated: \(.created_at)\nUpdated: \(.updated_at)\n\n\(.body)"'

    pr_number=$(
        gh api 'repos/:owner/:repo/pulls' |
            jq ".[] | $jq_template" |
            sed -e 's/"\(.*\)"/\1/' -e 's/\\t/\t/' |
            fzf \
            --with-nth=1 \
            --delimiter='\t' \
            --preview='echo -e {2}' \
            --preview-window=top:wrap |
            sed -En 's/^#([0-9]+).*/\1/gp'  #Â not sure how portable this is...
    )

    if [ -n "$pr_number" ]; then
        gh pr checkout "$pr_number"
    fi
}
